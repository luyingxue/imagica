# 更新日志

本文档记录了 AI 图像生成器项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/)。

## [2.0.0] - 2024-07-24

### 🔄 重大变更
- **架构完全重构**: 从 PyQt5 迁移到 CustomTkinter
- **模块化设计**: 采用分层架构，职责清晰分离
- **性能显著优化**: 打包体积减少 75%+，启动速度提升 60%+

### ✨ 新增功能
- **日志系统**: 实现轮转日志记录，支持多级别日志
- **异常处理**: 自定义异常类型，提供精确的错误信息
- **输入验证**: 严格的数据验证机制，提高应用稳定性
- **配置管理**: 集中化常量和配置管理系统
- **单元测试**: 核心功能的测试覆盖，保证代码质量
- **开发工具**: 集成 pre-commit、black、flake8、pytest 等工具

### 🎨 界面改进
- **现代化设计**: 全新的暗色主题界面
- **交互优化**: 更流畅的用户体验和响应
- **错误提示**: 用户友好的错误信息显示
- **图标系统**: 统一的 emoji 图标设计

### 🔧 开发体验
- **代码质量**: 添加类型注解、文档字符串、代码规范
- **项目结构**: 重新组织目录结构，提高可维护性
- **文档完善**: 详细的开发指南、架构说明、贡献指南
- **依赖管理**: 分离生产和开发环境依赖

### 🐛 问题修复
- 修复配置管理器调用错误
- 改善 API 错误处理和超时机制
- 优化图像加载性能和内存使用
- 增强应用程序整体稳定性

### 📦 打包优化
- 智能排除重型依赖库
- 支持 UPX 压缩进一步减小体积
- 优化启动时间和资源加载
- 改进打包脚本的错误处理

### 🔧 技术栈变更
- **UI框架**: PyQt5 → CustomTkinter
- **配置管理**: 简单字典 → 结构化配置类
- **错误处理**: 基础异常 → 自定义异常体系
- **日志记录**: print输出 → 专业日志系统
- **代码质量**: 无规范 → 完整的开发工具链

### 📊 性能对比

| 指标 | v1.x (PyQt5) | v2.0 (CustomTkinter) | 改善 |
|------|--------------|----------------------|------|
| 打包体积 | 80-120MB | 15-25MB | ⬇️ 75%+ |
| 启动时间 | 3-5秒 | 1-2秒 | ⬇️ 60%+ |
| 内存占用 | 150-200MB | 60-100MB | ⬇️ 50%+ |
| 依赖数量 | 15+ | 5 | ⬇️ 67% |

---

## [1.2.1] - 2024-03-15 (已停止维护)

### 🐛 问题修复
- 修复图像保存路径中文字符问题
- 改善网络异常时的错误提示
- 优化大图片的内存处理

### 🔧 小幅改进
- 更新默认 API 端点
- 改善界面响应性能
- 增加更多快捷键支持

---

## [1.2.0] - 2024-02-20 (已停止维护)

### ✨ 新增功能
- 支持批量图像生成 (1-5张)
- 添加图像比例选择 (竖屏/横屏)
- 实现全屏预览功能
- 支持模型选择 (Sora/GPT-4o)

### 🎨 界面改进
- 优化缩略图显示效果
- 改善右键菜单功能
- 增加进度条显示

### 🔧 技术改进
- 优化 API 调用逻辑
- 改善配置文件处理
- 增强错误处理机制

---

## [1.1.0] - 2024-01-15 (已停止维护)

### ✨ 新增功能
- 添加 API Key 配置界面
- 实现本地配置持久化
- 支持自定义 API URL

### 🐛 问题修复
- 修复图像加载失败的问题
- 改善网络超时处理
- 优化界面布局问题

---

## [1.0.0] - 2023-12-01 (已停止维护)

### 🎉 初始版本
- 基于 PyQt5 的图像生成界面
- 支持 OpenAI DALL-E API 调用
- 基础的图像预览和保存功能
- 简单的配置管理

---

## 版本计划

### [2.1.0] - 计划中
- 添加图像编辑功能
- 支持批量操作
- 增加主题切换
- 改善国际化支持

### [2.2.0] - 计划中
- 集成更多 AI 模型
- 添加图像风格滤镜
- 支持云端同步
- 增加协作功能

---

## 贡献说明

我们欢迎各种形式的贡献！请查看 [CONTRIBUTING.md](CONTRIBUTING.md) 了解如何参与项目开发。

### 如何报告问题
1. 检查现有的 [Issues](../../issues)
2. 提供详细的错误信息和重现步骤
3. 包含系统环境信息和日志文件

### 如何提出功能请求
1. 在 [Discussions](../../discussions) 中讨论想法
2. 详细描述功能需求和使用场景
3. 提供设计mockup或示例（如有）

---

## 致谢

感谢所有为这个项目做出贡献的开发者和用户！

特别感谢：
- OpenAI 提供的强大 API 服务
- CustomTkinter 社区的技术支持
- 所有提供反馈和建议的用户 